canada_unite_can = {
	is_shown = {
		OR = {
			country_has_primary_culture = cu:anglo_canadian
			country_has_primary_culture = cu:franco_canadian
		}
		is_subject = yes
		any_neighbouring_state = {
			owner = {
				OR = {
					country_has_primary_culture = cu:anglo_canadian
					country_has_primary_culture = cu:franco_canadian
				}
				is_subject = yes
				NOT = { THIS = ROOT }
				top_overlord = {
					THIS = root.top_overlord
				}
			}
		}
        is_player = no
	}

	possible = {
		is_at_war = no
		has_technology_researched = nationalism
		top_overlord = {
			relations:root >= relations_threshold:amicable
		}
		NOT = { has_modifier = canada_test_modifier }
		custom_tooltip = {
			text = unite_canada_je_can_tt
			any_neighbouring_state = {
				owner = {
					is_ai = yes
					relations:root >= relations_threshold:amicable
					OR = {
						country_has_primary_culture = cu:anglo_canadian
						country_has_primary_culture = cu:franco_canadian
					}
					is_subject = yes
					NOT = { THIS = ROOT }
					top_overlord = {
						THIS = root.top_overlord
					}
					this.gdp < root.gdp
				}
			}
		}
	}
	when_taken = {
		custom_tooltip = unite_canada_tt
		hidden_effect = {
			trigger_event = { id = can_aus.1 popup = yes }
		}
		add_modifier = {
			name = canada_test_modifier
			days = short_modifier_time
		}
	}

	ai_chance = {
		value = 0
		if = {
			limit = {
				has_technology_researched = pan-nationalism
			}
			add = 100
		}		
	}
}

canada_unite_gbr = {
	is_shown = {
        #C:QUE ?= { is_player = no }
        #c:ONT ?= { is_player = no }
        #c:CAN ?= { is_player = no }
		any_subject_or_below = {
			OR = {
				country_has_primary_culture = cu:anglo_canadian
				country_has_primary_culture = cu:franco_canadian
			}
			is_ai = yes
			count >= 2
		}
	}
	possible = {
		is_at_war = no
		has_technology_researched = nationalism
		NOT = { has_modifier = canada_test_modifier }
		custom_tooltip = {
			text = gbr_can_relations_tt
			any_subject_or_below = {
				OR = {
					country_has_primary_culture = cu:anglo_canadian
					country_has_primary_culture = cu:franco_canadian
				}
				is_ai = yes
				relations:root >= relations_threshold:amicable
				count >= 2
			}
		}
	}
	when_taken = {
		custom_tooltip = unite_canada_tt
		hidden_effect = {
			trigger_event = { id = can_aus.2 popup = yes }
		}
		add_modifier = {
			name = canada_test_modifier
			days = short_modifier_time
		}
	}

	ai_chance = {
		value = 0
		if = {
			limit = {
				has_technology_researched = pan-nationalism
			}
			add = 100
		}		
	}
}

quanta_cura_decision_variable_debug = {
	is_shown = {
        always = yes
	}
	possible = {
		always = yes
	}
	when_taken = {
		set_global_variable = global_variable_quanta_cura_var_released

		owner = {
			post_notification = bpm_quanta_cura
		}
	}

	ai_chance = {
		value = 0
	}
}

immortale_dei_decision_variable_debug = {
	is_shown = {
        always = yes
	}
	possible = {
		always = yes
	}
	when_taken = {
		set_global_variable = global_variable_immortale_dei_var_released

		owner = {
			post_notification = bpm_immortale_dei
		}

		hidden_effect = {
			every_country = {
				if = {
					limit = {
						OR = {
							religion_percent_country = { 
								target = rel:catholic
								value >= 0.75
							}
							country_has_state_religion = rel:catholic
						}
					}

					ig:ig_reactionaries = {
						bpm_remove_all_rel_ideologies = yes
						add_ideology = ideology_rel_modern_moralist
						bpm_remove_all_cit_ideologies = yes
						add_ideology = ideology_cit_multiethnic_nationalist
						bpm_remove_all_mil_ideologies = yes
						add_ideology = ideology_mil_patriotic_liberal

						bpm_reorder_ideologies = yes
					}

					ig:ig_christian_democrats = {
						if = {
							limit = { 
								owner = {
									OR = {
										bpm_country_is_republic = yes
										bpm_country_is_latin_american = yes
									}
								}
							}
							add_ideology = ideology_gov_liberal_republican
						}

						else = { add_ideology = ideology_gov_moderate_monarchist }

						bpm_remove_all_rel_ideologies = yes
						add_ideology = ideology_rel_modern_moralist

						bpm_reorder_ideologies = yes
					}
				}
			}
		}
	}

	ai_chance = {
		value = 0
	}
}

rerum_novarum_decision_variable_debug = {
	is_shown = {
        always = yes
	}
	possible = {
		always = yes
	}
	when_taken = {
		set_global_variable = global_rerum_novarum_issued_var

		owner = {
			post_notification = bpm_rerum_novarum
		}

		hidden_effect = {
			every_country = {
				remove_variable = cant_progress_sorry_var

				if = {
					limit = {
						OR = {
							religion_percent_country = { 
								target = rel:catholic
								value >= 0.1
							}
							religion_percent_country = { 
								target = rel:protestant
								value >= 0.1
							}
						}
					}

					ig:ig_reactionaries = {
						bpm_remove_all_dop_ideologies = yes
						add_ideology = ideology_dop_organic_democrat
						bpm_remove_all_sta_ideologies = yes
						add_ideology = ideology_sta_organic_state
						bpm_remove_all_eco_ideologies = yes
						add_ideology = ideology_eco_distributist_economy
						bpm_remove_all_wel_ideologies = yes
						add_ideology = ideology_wel_distributist_welfare

						bpm_reorder_ideologies = yes
					}
				}
			}
		}
	}

	ai_chance = {
		value = 0	
	}
}

graves_de_communi_re_decision_variable_debug = {
	is_shown = {
        always = yes
	}
	possible = {
		always = yes
	}
	when_taken = {
		set_global_variable = global_variable_graves_de_communi_re
		every_country = {
			remove_variable = cant_progress_sorry_var
		}
	}

	ai_chance = {
		value = 0	
	}
}