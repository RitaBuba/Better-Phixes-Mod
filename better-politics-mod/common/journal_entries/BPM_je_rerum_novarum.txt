je_bpm_errors_of_the_world = {
	icon = "gfx/interface/icons/invention_icons/egalitarianism.dds"

	group = bpm_je_group_global

	is_shown_when_inactive = {
		#hidden_trigger = { NOT = { has_global_variable = global_variable_quanta_cura_var_released } }
		always = yes
	}

	possible = {
		custom_tooltip = {
			text = "bpm_je_trigger_peoples_springtime_happened"
			OR = {
				has_global_variable = peoples_springtime_happened
				game_date > 1855.1.1
			}
		}
		trigger_if = {
			limit = {
				has_global_variable = peoples_springtime_happened
			}
			custom_tooltip = {
				text = "bpm_je_trigger_peoples_springtime_not_recent"
				NOT = { 
					has_global_variable = recently_completed_peoples_springtime_je 
				}
			}
		}
		#always = yes
	}

	immediate = {
		set_global_variable = {
			name = je_papal_encyclical_quanta_cura
			value = 0
		}
	}

	is_progressing = {
		always = yes
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					scope:journal_entry = {
						is_progressing = yes
					}
				}

				if = {
					limit = {
						#NOT = {
						#	has_global_variable = global_variable_quanta_cura_var_released
						#}
						always = yes
					}

					if = { ##### Radicals make the Church cry
						limit = {
							bpm_country_is_majority_catholic = yes
							country_rank = rank_value:great_power
						}
						change_global_variable = {
							name = je_papal_encyclical_quanta_cura
							add = {
								value = ig:ig_radicals.ig_clout
								add = ig:ig_socialists.ig_clout
								multiply = 1.55
							}
						}
					}

					else_if = { ##### Radicals make the Church cry
						limit = {
							bpm_country_is_majority_catholic = yes
							NOT = {
								country_rank = rank_value:great_power
							}
						}
						change_global_variable = {
							name = je_papal_encyclical_quanta_cura
							add = {
								value = ig:ig_radicals.ig_clout
								add = ig:ig_socialists.ig_clout
								multiply = 1.11
							}
						}
					}

					if = { ##### 
						limit = {
							bpm_country_is_majority_catholic = yes
							country_rank = rank_value:great_power
						}
						change_global_variable = {
							name = je_papal_encyclical_quanta_cura
							add = {
								value = ig:ig_liberals.ig_clout
								multiply = 1.2
							}
						}
					}

					else_if = { ##### 
						limit = {
							bpm_country_is_majority_catholic = yes
							NOT = {
								country_rank = rank_value:great_power
							}
						}
						change_global_variable = {
							name = je_papal_encyclical_quanta_cura
							add = {
								value = ig:ig_liberals.ig_clout
								multiply = 1.07
							}
						}
					}

					if = { ##### Democracy is bad-bad!
						limit = {
							bpm_country_is_majority_catholic = yes
						}

						if = {
							limit = {
								has_law = law_type:law_wealth_voting
							}
	
							change_global_variable = {
								name = je_papal_encyclical_quanta_cura
								add = {
									value = government_legitimacy
									multiply = 0.004
									subtract = 0.4
									divide = 2.5
								}
							}
						}

						else_if = {
							limit = {
								has_law = law_type:law_census_suffrage
							}
	
							change_global_variable = {
								name = je_papal_encyclical_quanta_cura
								add = {
									value = government_legitimacy
									
									multiply = 0.008
									subtract = 0.3
									divide = 2.5
								}
							}
						}

						else_if = {
							limit = {
								has_law = law_type:law_universal_suffrage
							}
	
							change_global_variable = {
								name = je_papal_encyclical_quanta_cura
								add = {
									value = government_legitimacy
									multiply = 0.012
									subtract = 0.2
									divide = 2.5
								}
							}
						}
					}

					if = { ##### Secularising schools and the state is no-go!
						limit = {
							bpm_country_is_majority_catholic = yes
						}

						if = {
							limit = {
								has_law = law_type:law_public_schools
							}
	
							change_global_variable = {
								name = je_papal_encyclical_quanta_cura
								add = {
									value = 0.0015
								}
							}
						}

						if = {
							limit = {
								has_law = law_type:law_freedom_of_conscience
							}
	
							change_global_variable = {
								name = je_papal_encyclical_quanta_cura
								add = {
									value = 0.0015
								}
							}
						}

						else_if = {
							limit = {
								has_law = law_type:law_total_separation
							}
	
							change_global_variable = {
								name = je_papal_encyclical_quanta_cura
								add = {
									value = 0.0025
								}
							}
						}

						else_if = {
							limit = {
								has_law = law_type:law_state_atheism
							}
	
							change_global_variable = {
								name = je_papal_encyclical_quanta_cura
								add = {
									value = 0.0033
								}
							}
						}
					}
				}
			}
		}
	}

	complete = {
		trigger_if = {
			limit = { has_global_variable = je_papal_encyclical_quanta_cura }
			custom_tooltip = {
				text = "bpm_je_progress_complete"
				global_var:je_papal_encyclical_quanta_cura >= 250
			}
		}
	}

	on_complete = {
		trigger_event = { id = bpm_papal_encyclicals.1 }
	}

	progressbar = yes

	current_value = {
		value = global_var:je_papal_encyclical_quanta_cura 
	}

	goal_add_value = {
		add = 250
		max = 250
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_bpm_immortal_god = {
	icon = "gfx/interface/icons/law_icons/law_icon_parts/hands.dds"

	group = bpm_je_group_global

	is_shown_when_inactive = {
		#hidden_trigger = { NOT = { has_global_variable = global_variable_immortale_dei_var_released } }
		always = yes
	}

	possible = {
		has_global_variable = global_variable_quanta_cura_var_released
		always = yes
	}

	immediate = {
		set_global_variable = {
			name = je_papal_encyclical_immortale_dei
			value = 0
		}
	}

	is_progressing = {
		always = yes
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					scope:journal_entry = {
						is_progressing = yes
					}
				}

				if = {
					limit = {
						#NOT = {
						#	has_global_variable = global_variable_immortale_dei_var_released
						#}
						always = yes
					}

					if = { ##### Secularists, Socialists and evil protestant moralists are very evil
						limit = {
							bpm_country_is_majority_catholic = yes
							country_rank = rank_value:great_power
						}
						change_global_variable = {
							name = je_papal_encyclical_immortale_dei
							add = {
								value = ig:ig_radicals.ig_clout
								add = ig:ig_socialists.ig_clout
								add = ig:ig_reformist_socialists.ig_clout
								add = ig:ig_revolutionist_socialists.ig_clout
								add = ig:ig_anarchists.ig_clout
								multiply = 1.33
							}
						}
					}

					else_if = { ##### Secularists, Socialists and evil protestant moralists are very evil
						limit = {
							bpm_country_is_majority_catholic = yes
							NOT = {
								country_rank = rank_value:great_power
							}
						}
						change_global_variable = {
							name = je_papal_encyclical_immortale_dei
							add = {
								value = ig:ig_radicals.ig_clout
								add = ig:ig_socialists.ig_clout
								add = ig:ig_reformist_socialists.ig_clout
								add = ig:ig_revolutionist_socialists.ig_clout
								add = ig:ig_anarchists.ig_clout
								divide = 2
							}
						}
					}

					if = { ##### Nationalism...
						limit = {
							bpm_country_is_majority_catholic = yes
							country_rank = rank_value:great_power
						}
						change_global_variable = {
							name = je_papal_encyclical_immortale_dei
							add = {
								value = ig:ig_national_liberals.ig_clout
								add = ig:ig_conservatives.ig_clout
								multiply = 1.33
							}
						}
					}

					else_if = { ##### Nationalism
						limit = {
							bpm_country_is_majority_catholic = yes
							NOT = {
								country_rank = rank_value:great_power
							}
						}
						change_global_variable = {
							name = je_papal_encyclical_immortale_dei
							add = {
								value = ig:ig_national_liberals.ig_clout
								add = ig:ig_conservatives.ig_clout
								divide = 2
							}
						}
					}

					if = { ##### Okay guys now loyalty to the state and Catholic involvment is what we need.
						limit = {
							bpm_country_is_majority_catholic = yes
						}

						if = {
							limit = {
								NOT = {
									has_law = law_type:law_census_suffrage
									has_law = law_type:law_universal_suffrage
								}
							}
	
							change_global_variable = {
								name = je_papal_encyclical_immortale_dei
								add = {
									value = government_legitimacy
									multiply = 0.004
									subtract = 0.4
								}
							}
						}
					}

					if = { ##### Elected bureaucrats and state decentralization is okay.
						limit = {
							bpm_country_is_majority_catholic = yes
						}

						if = {
							limit = {
								NOT = {
									has_law = law_type:law_elected_bureaucrats
								}
							}
	
							change_global_variable = {
								name = je_papal_encyclical_immortale_dei
								add = {
									value = government_legitimacy
									multiply = 0.002
									subtract = 0.2
									divide = 3.33
								}
							}
						}

						if = {
							limit = {
								NOR = {
									has_law = law_type:law_confederated
									has_law = law_type:law_federated
								}
							}
	
							change_global_variable = {
								name = je_papal_encyclical_immortale_dei
								add = {
									value = government_legitimacy
									multiply = 0.002
									subtract = 0.2
									divide = 2.22
								}
							}
						}
					}

					if = { ##### Secularising schools and the state is no-go! (But less painful idk)
						limit = {
							bpm_country_is_majority_catholic = yes
						}

						if = {
							limit = {
								has_law = law_type:law_public_schools
							}
	
							change_global_variable = {
								name = je_papal_encyclical_immortale_dei
								add = {
									value = 0.0033
								}
							}
						}

						else_if = {
							limit = {
								has_law = law_type:law_total_separation
							}
	
							change_global_variable = {
								name = je_papal_encyclical_immortale_dei
								add = {
									value = 0.004
								}
							}
						}

						else_if = {
							limit = {
								has_law = law_type:law_state_atheism
							}
	
							change_global_variable = {
								name = je_papal_encyclical_immortale_dei
								add = {
									value = 0.005
								}
							}
						}
					}
				}
			}
		}
	}

	complete = {
		trigger_if = {
			limit = { has_global_variable = je_papal_encyclical_immortale_dei }
			custom_tooltip = {
				text = "bpm_je_progress_complete"
				global_var:je_papal_encyclical_immortale_dei >= 250
			}
		}
	}

	on_complete = {
		trigger_event = { id = bpm_papal_encyclicals.2 }
	}

	progressbar = yes

	current_value = {
		value = global_var:je_papal_encyclical_immortale_dei
	}

	goal_add_value = {
		add = 250
		max = 250
	}

	weight = 100
	should_be_pinned_by_default = yes
}


je_bpm_light_amidst_darkness = {
	icon = "gfx/interface/icons/law_icons/law_icon_parts/workers.dds"

	group = bpm_je_group_global

	is_shown_when_inactive = {
		#hidden_trigger = { NOT = { has_global_variable = global_rerum_novarum_issued_var } }
		always = yes
	}

	possible = {
		has_global_variable = global_variable_immortale_dei_var_released
		always = yes
	}

	immediate = {
		set_global_variable = {
			name = je_papal_encyclical_rerum_novarum
			value = 0
		}
	}

	is_progressing = {
		always = yes
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					scope:journal_entry = {
						is_progressing = yes
					}
				}

				if = {
					limit = {
						#NOT = {
						#	has_global_variable = global_rerum_novarum_issued_var
						#}
						always = yes
					}

					if = { ##### Socialists of all colors and movements too, they are very evil.
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
						}
						change_global_variable = {
							name = je_papal_encyclical_rerum_novarum
							add = {
								value = ig:ig_socialists.ig_clout
								add = ig:ig_reformist_socialists.ig_clout
								add = ig:ig_revolutionist_socialists.ig_clout
								add = ig:ig_anarchists.ig_clout
								multiply = 1.33
							}
						}
					}

					if = { ##### ...movements too, they are very evil.
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
							any_political_movement = {
								is_political_movement_type = movement_socialist
							}
						}
						change_variable = {
							name = je_papal_encyclical_rerum_novarum
							add = {
								value = ROOT.var:bpm_socialist_movement.political_movement_support
								divide = 8
							}
						}
					}

					if = { ##### ...movements too, they are very evil.
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
							any_political_movement = {
								is_political_movement_type = movement_reformist_socialist
							}
						}

						change_variable = {
							name = je_papal_encyclical_rerum_novarum
							add = {
								value = ROOT.var:bpm_reformist_socialist_movement.political_movement_support
								divide = 6
							}
						}
					}

					if = { ##### ...movements too, they are very evil.
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
							any_political_movement = {
								is_political_movement_type = movement_anarchist
							}
						}

						change_variable = {
							name = je_papal_encyclical_rerum_novarum
							add = {
								value = ROOT.var:bpm_anarchist_movement.political_movement_support
								divide = 4
							}
						}
					}

					if = { ##### ...movements too, they are very evil.
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
							any_political_movement = {
								is_political_movement_type = movement_communist
							}
						}

						change_variable = {
							name = je_papal_encyclical_rerum_novarum
							add = {
								value = ROOT.var:bpm_communist_movement.political_movement_support
								divide = 3.33
							}
						}
					}

					if = { ##### Groups that like DON'T like Public Welfare.
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
						}
						change_global_variable = {
							name = je_papal_encyclical_rerum_novarum
							add = {
								value = ig:ig_conservatives.ig_clout
								add = ig:ig_liberals.ig_clout
								add = ig:ig_market_liberals.ig_clout
								add = ig:ig_national_liberals.ig_clout
								divide = 2
							}
						}
					}

					if = { ##### Okay guys now loyalty to the state and Catholic involvment is what we need.
						limit = {
							bpm_country_is_majority_catholic = yes
						}

						if = {
							limit = {
								NOR = {
									has_law = law_type:law_census_suffrage
									has_law = law_type:law_universal_suffrage
								}
							}
	
							change_global_variable = {
								name = je_papal_encyclical_rerum_novarum
								add = {
									value = government_legitimacy
									multiply = 0.004
									subtract = 0.4
								}
							}
						}
					}

					if = { ##### Lack of labor unions
						limit = {
							bpm_country_is_majority_catholic = yes
						}

						if = {
							limit = {
								NOT = {
									has_law = law_type:all_labor_unions_allowed
								}
							}
	
							change_global_variable = {
								name = je_papal_encyclical_rerum_novarum
								add = {
									value = ROOT.var:bpm_labor_movement.political_movement_support
								}
							}
						}

						if = {
							limit = {
								has_law = law_type:law_laissez_faire
							}
	
							change_global_variable = {
								name = je_papal_encyclical_rerum_novarum
								add = {
									value = 0.0025
								}
							}
						}
					}

					if = { ##### Average SoL
						limit = {
							bpm_country_is_majority_catholic = yes
						}

						change_global_variable = {
							name = je_papal_encyclical_rerum_novarum
							add = {
								value = 15
								subtract = ROOT.average_sol
								divide = 333
							}
						}
					}
				}
			}
		}
	}

	complete = {
		trigger_if = {
			limit = { has_global_variable = je_papal_encyclical_rerum_novarum }
			custom_tooltip = {
				text = "bpm_je_progress_complete"
				global_var:je_papal_encyclical_rerum_novarum >= 250
			}
		}
	}

	on_complete = {
		trigger_event = { id = bpm_papal_encyclicals.3 }
	}

	progressbar = yes

	current_value = {
		value = global_var:je_papal_encyclical_rerum_novarum
	}

	goal_add_value = {
		add = 250
		max = 250
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_bpm_graves_de_communi_re = {
	icon = "gfx/interface/icons/law_icons/law_icon_parts/book.dds"

	group = bpm_je_group_global

	is_shown_when_inactive = {
		#hidden_trigger = { NOT = { has_global_variable = global_rerum_novarum_issued_var } }
		always = yes
	}

	possible = {
		has_global_variable = global_rerum_novarum_issued_var
		#always = yes
	}

	immediate = {
		set_global_variable = {
			name = je_papal_encyclical_graves_de_communi_re
			value = 0
		}
	}

	is_progressing = {
		always = yes
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					scope:journal_entry = {
						is_progressing = yes
					}
				}

				if = {
					limit = {
						#NOT = {
						#	has_global_variable = global_rerum_novarum_issued_var
						#}
						always = yes
					}

					if = { ##### Socialists of all colors and movements too, they are very evil.
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
						}
						change_global_variable = {
							name = je_papal_encyclical_graves_de_communi_re
							add = {
								value = ig:ig_socialists.ig_clout
								add = ig:ig_reformist_socialists.ig_clout
								add = ig:ig_revolutionist_socialists.ig_clout
								add = ig:ig_anarchists.ig_clout
								multiply = 1.22
							}
						}
					}

					if = { ##### ...movements too, they are very evil.
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
							any_political_movement = {
								is_political_movement_type = movement_socialist
							}
						}
						change_variable = {
							name = je_papal_encyclical_graves_de_communi_re
							add = {
								value = ROOT.var:bpm_socialist_movement.political_movement_support
								divide = 8
							}
						}
					}

					if = { ##### ...movements too, they are very evil.
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
							any_political_movement = {
								is_political_movement_type = movement_reformist_socialist
							}
						}

						change_variable = {
							name = je_papal_encyclical_graves_de_communi_re
							add = {
								value = ROOT.var:bpm_reformist_socialist_movement.political_movement_support
								divide = 8
							}
						}
					}

					if = { ##### ...movements too, they are very evil.
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
							any_political_movement = {
								is_political_movement_type = movement_anarchist
							}
						}

						change_variable = {
							name = je_papal_encyclical_graves_de_communi_re
							add = {
								value = ROOT.var:bpm_anarchist_movement.political_movement_support
								divide = 4
							}
						}
					}

					if = { ##### ...movements too, they are very evil.
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
							any_political_movement = {
								is_political_movement_type = movement_communist
							}
						}

						change_variable = {
							name = je_papal_encyclical_graves_de_communi_re
							add = {
								value = ROOT.var:bpm_communist_movement.political_movement_support
								divide = 8
							}
						}
					}

					if = { ##### Christian Democrats and National Conservatives... rising... very fast? And being democratic? WTF????
						limit = {
							bpm_country_is_majority_catholic = yes
							#country_rank = rank_value:great_power
						}
						change_global_variable = {
							name = je_papal_encyclical_graves_de_communi_re
							add = {
								value = ig:ig_christian_democrats.ig_clout
								add = ig:ig_reactionaries.ig_clout
								multiply = 1.11
							}
						}
					}

					if = { ##### Right-wing of Christian Democracy is also feeling... very funny
						limit = {
							bpm_country_is_majority_catholic = yes
							ig:ig_conservatives = {
								has_ideology = ideology:ideology_eco_distributist_economy
							}
							#country_rank = rank_value:great_power
						}
						change_global_variable = {
							name = je_papal_encyclical_graves_de_communi_re
							add = {
								value = ig:ig_conservatives.ig_clout
								multiply = 1.04
							}
						}
					}

					if = { ##### An actually open democratic system...
						limit = {
							bpm_country_is_majority_catholic = yes
						}

						if = {
							limit = {
								OR = {
									has_law = law_type:law_census_suffrage
									has_law = law_type:law_universal_suffrage
								}
							}
	
							change_global_variable = {
								name = je_papal_encyclical_graves_de_communi_re
								add = {
									value = government_legitimacy
									multiply = 0.002
									subtract = 0.2
								}
							}
						}
					}
				}
			}
		}
	}

	complete = {
		trigger_if = {
			limit = { has_global_variable = je_papal_encyclical_graves_de_communi_re }
			custom_tooltip = {
				text = "bpm_je_progress_complete"
				global_var:je_papal_encyclical_graves_de_communi_re >= 250
			}
		}
	}

	on_complete = {
		trigger_event = { id = bpm_papal_encyclicals.4 }
	}

	progressbar = yes

	current_value = {
		value = global_var:je_papal_encyclical_graves_de_communi_re
	}

	goal_add_value = {
		add = 250
		max = 250
	}

	weight = 100
	should_be_pinned_by_default = yes
}